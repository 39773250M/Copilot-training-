{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth/auth.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction LoginComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nexport class LoginComponent {\n  constructor(authService, fb, router) {\n    this.authService = authService;\n    this.fb = fb;\n    this.router = router;\n    this.errorMessage = '';\n    this.loginSuccess = '';\n    this.username = '';\n    this.password = '';\n    this.loginError = '';\n    this.loginForm = this.fb.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    // Add your initialization logic here\n    username = 'muruagn';\n    password = 'ascasasc';\n  }\n  onSubmit() {\n    const username = this.loginForm.get('username')?.value;\n    const password = this.loginForm.get('password')?.value;\n    console.log('Login check', username + ' pwd:' + password);\n    this.authService.login(username, password).subscribe(user => {\n      if (user && user.password === password) {\n        // Handle successful login\n        console.log('Login successful');\n        this.loginSuccess = 'Login successful';\n        if (user.role === 'receptionist') {\n          this.router.navigate(['/patient']);\n        } else {\n          this.router.navigate(['/visits']);\n        }\n      } else {\n        this.errorMessage = 'Invalid username/password';\n        console.log('Invalid username/password');\n      }\n    }, error => {\n      this.errorMessage = 'An error occurred';\n    });\n  }\n  login() {\n    console.log('Login check', this.username + ' pwd:' + this.password);\n    this.authService.login(this.username, this.password).subscribe(user => {\n      if (user && user.password === this.password) {\n        // Handle successful login\n        console.log('Login successful');\n        this.loginSuccess = 'Login successful';\n        if (user.role === 'patient') {\n          this.router.navigate(['/visits']);\n        }\n        if (user.role === 'receptionist' || user.role === 'doctor') {\n          this.router.navigate(['/patient']);\n        }\n      } else {\n        // Handle login error\n        this.loginError = 'Invalid username or password';\n      }\n    }, error => {\n      console.error('Login error', error);\n      this.loginError = 'An error occurred during login';\n    });\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 16,\n      vars: 3,\n      consts: [[1, \"container\"], [3, \"ngSubmit\", \"formGroup\"], [\"class\", \"alert alert-sucess\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"mb-3\"], [\"for\", \"username\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"username\", \"formControlName\", \"username\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"password\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"alert\", \"alert-sucess\"], [1, \"alert\", \"alert-danger\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵtemplate(4, LoginComponent_div_4_Template, 2, 1, \"div\", 2)(5, LoginComponent_div_5_Template, 2, 1, \"div\", 3);\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"label\", 5);\n          i0.ɵɵtext(8, \"Username:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 7);\n          i0.ɵɵtext(12, \"Password:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"button\", 9);\n          i0.ɵɵtext(15, \"Submit\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        }\n      },\n      dependencies: [i4.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","errorMessage","LoginComponent","constructor","authService","fb","router","loginSuccess","username","password","loginError","loginForm","group","required","ngOnInit","onSubmit","get","value","console","log","login","subscribe","user","role","navigate","error","ɵɵdirectiveInject","i1","AuthService","i2","FormBuilder","i3","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_3_listener","ɵɵtemplate","LoginComponent_div_4_Template","LoginComponent_div_5_Template","ɵɵelement","ɵɵproperty"],"sources":["E:\\Murugan\\copilot angular hospital\\Copilot-training\\src\\app\\login\\login.component.ts","E:\\Murugan\\copilot angular hospital\\Copilot-training\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { AuthService } from '../../services/auth/auth.service'; // Import the AuthService\r\nimport { Inject } from '@angular/core';\r\n\r\n\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.scss']\r\n  })\r\nexport class LoginComponent implements OnInit {\r\n  loginForm!: FormGroup;\r\n  errorMessage: string = '';\r\n  loginSuccess: string = '';\r\n  username: string = '';\r\n  password: string = '';\r\n  \r\n  loginError: string = '';\r\n\r\n  constructor( private authService: AuthService, private fb: FormBuilder, private router: Router) {\r\n    this.loginForm = this.fb.group({\r\n      username: ['', Validators.required],\r\n      password: ['', Validators.required]\r\n    });\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    // Add your initialization logic here\r\n    username= 'muruagn';\r\n  password = 'ascasasc';\r\n  }\r\n\r\n  onSubmit(): void {\r\n    const username = this.loginForm.get('username')?.value;\r\n    const password = this.loginForm.get('password')?.value;\r\n\r\n    console.log('Login check', username + ' pwd:' + password);\r\n\r\n    this.authService.login(username, password).subscribe(\r\n      (user) => {\r\n        if (user && user.password === password) {\r\n          // Handle successful login\r\n          console.log('Login successful');\r\n          this.loginSuccess = 'Login successful';\r\n          if (user.role === 'receptionist') {\r\n            this.router.navigate(['/patient']);\r\n          } else {\r\n          this.router.navigate(['/visits']);\r\n          }\r\n        } else {\r\n          this.errorMessage = 'Invalid username/password';\r\n          console.log('Invalid username/password');\r\n        }\r\n      },\r\n      (error: any) => { // Explicitly type 'error' as 'any'\r\n        this.errorMessage = 'An error occurred';\r\n      }\r\n    );\r\n  }\r\n\r\n  login(): void {\r\n    console.log('Login check', this.username + ' pwd:' + this.password);\r\n\r\n    this.authService.login(this.username, this.password).subscribe(\r\n      (user) => {\r\n        if (user && user.password === this.password) {\r\n          // Handle successful login\r\n          console.log('Login successful');\r\n          this.loginSuccess = 'Login successful';\r\n          if (user.role === 'patient' ) {\r\n            this.router.navigate(['/visits']);\r\n          }\r\n          if (user.role === 'receptionist' || user.role === 'doctor') {\r\n            this.router.navigate(['/patient']);\r\n          }\r\n        } else {\r\n          // Handle login error\r\n          this.loginError = 'Invalid username or password';\r\n        }\r\n      },\r\n      (error) => {\r\n        console.error('Login error', error);\r\n        this.loginError = 'An error occurred during login';\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\n//if user type is receptionist, navigate to patient page\" and press enter   \r\n \r\n// import { Component, OnInit } from '@angular/core';\r\n\r\n// @Component({\r\n//   selector: 'app-login',\r\n//   templateUrl: './login.component.html',\r\n//   styleUrls: ['./login.component.scss']\r\n// })\r\n// export class LoginComponent implements OnInit {\r\n\r\n//   constructor() { }\r\n\r\n//   ngOnInit(): void {\r\n//   }\r\n\r\n// }\r\n","\r\n  \r\n  <div class=\"container\">\r\n  <h2>Login</h2>\r\n  <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n    <div *ngIf=\"errorMessage\" class=\"alert alert-sucess\">{{errorMessage}}</div>\r\n    <div *ngIf=\"errorMessage\" class=\"alert alert-danger\">{{errorMessage}}</div>\r\n    <div class=\"mb-3\">\r\n      <label for=\"username\" class=\"form-label\">Username:</label>\r\n      <input type=\"text\" class=\"form-control\" id=\"username\" formControlName=\"username\" required>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n      <label for=\"password\" class=\"form-label\">Password:</label>\r\n      <input type=\"password\" class=\"form-control\" id=\"password\" formControlName=\"password\" required>\r\n    </div>\r\n    \r\n    <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\r\n  </form>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}