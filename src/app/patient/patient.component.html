<div class="container mt-4">
    <div class="row">
      <div class="col-md-12">
        <div class="input-group mb-3">
    <input [(ngModel)]="mobileNumber" class="form-control" placeholder="Enter mobile number" />
    <button class="btn btn-primary" (click)="searchPatient()">Search</button>
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger">{{errorMessage}}</div>
  <div *ngIf="patientNotFound">
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-12">
        <button class="btn btn-primary mb-3" [routerLink]="['/register-patient']">
          Register New Patient
        </button>

        </div>
        </div>
        </div>
    </div>

    <div *ngIf="isdoctor">
        <div class="container mt-4">
          <div class="row">
            <div class="col-md-12">
              <button (click)="addVisit()" class="btn btn-primary mb-3" >
               Add Patient Visit
              </button>
      
              </div>
              </div>
              </div>
          </div>

  <div *ngIf="patient">
    <div  class="card mb-4">
        <div class="card-body">
    <h2 class="card-title">Patient Details</h2>
    <p class="card-text" >ID: {{ patient.id }}</p>
    <p class="card-text">Name: {{ patient.name }}</p>
    <p class="card-text">Mobile Number: {{ patient.mobileNumber }}</p>
    <!-- Display other patient details as necessary -->
    <button class="btn btn-secondary mt-3" (click)="addVisit()">Add Visit</button>
  <!-- </div> -->
</div>
</div>
</div>

<div *ngIf="patient">
  <div class="container">
    <h2>Visit Details</h2>
    <div class="row">
       <p><strong>Doctor Name:</strong>{{this.currentUser}} </p>
        <div class="col-md-3" *ngFor="let visit of vpatient.visits">
        
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"></h5>
                    <p class="card-text"></p>
                   
                    <p><strong>Patient Name:</strong> {{this.user.name}}</p>
                    <p><strong>Condition:</strong>{{visit.condition}} </p>
                    <p><strong>Treatment:</strong> {{visit.treatment}}</p>
                    <!-- <button class="btn btn-primary" >View Details</button> -->
                </div>
            </div>
        </div>
    </div>

     <br>
     <br>           
   
  
    <h3>Prescribed Medicine</h3>
    <table class="table">
      <thead>
        <tr>
          <th>Medicine Name</th>
          <th>Dosage</th>
          <th>After Meal</th>
          <th>Duration Date</th>
          <th>Advice</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let visit of vpatient.visits">
          <ng-container *ngFor="let medicine of visit.prescriptions">
        
          <td>{{medicine.medicineName}}</td>
          <td>{{medicine.dosage}}</td>
          <td>{{medicine.afterMeal ? 'Yes' : 'No'}}</td>
          <td>{{medicine.durationDate | date:'MMM dd, yyyy'}}</td>
          <td>{{medicine.advice}}</td>
    
      </ng-container>
    </tr>
      </tbody>
    </table>

</div>

</div>
</div>
</div>
</div>
   
